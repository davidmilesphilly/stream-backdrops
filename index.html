<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Stream Backdrops – Free HD Virtual Backgrounds</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="style.css"/>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body>
  <!-- HERO -->
  <header class="hero" style="background:url('backgrounds/digital-architecture-visualization.jpg') center/cover;">
    <div>
      <h1>Instant Professional Backgrounds</h1>
      <p>Look great on every Zoom, Teams, or Meet call</p>
      <a href="#gallery" class="cta">Get Started Free</a>
    </div>
  </header>

  <!-- AD SLOT -->
  <div class="ad-slot">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXXXXXXXX"
         data-ad-slot="1234567890"
         data-ad-format="auto"></ins>
  </div>

  <!-- LIVE DEMO -->
  <section id="demo">
    <h2>Try it now</h2>
    <div class="preview">
      <video id="webcam" autoplay muted playsinline></video>
      <canvas id="canvas"></canvas>
    </div>
    <div id="controls">
      <select id="bgSelect">
        <option value="">Choose backdrop…</option>
      </select>
      <button id="snapBtn">Download HD</button>
    </div>
  </section>

  <!-- AUTO-GALLERY -->
  <section id="gallery">
    <h2>Free Backgrounds</h2>
    <div id="gallery-grid" class="grid"></div>
  </section>

  <footer>
    <p>Need branded 4K packs?
      <a href="https://gumroad.com/l/50-4k-pack" target="_blank">Upgrade to Pro →</a>
    </p>
  </footer>

  <!-- Scripts -->
  <script>
    /* 1. Populate <select> with backgrounds */
    const bgSelect = document.getElementById('bgSelect');
    fetch('https://api.github.com/repos/davidmilesphilly/stream-backdrops/contents/backgrounds')
      .then(r => r.json())
      .then(list => list.filter(f => /\.(jpe?g|png)$/i.test(f.name)))
      .then(files => {
        /* populate <select> for demo */
        files.forEach(f => {
          const opt = document.createElement('option');
          opt.value = f.download_url;
          opt.textContent = f.name.replace(/\.\w+$/, '').replace(/[-_]/g, ' ');
          bgSelect.appendChild(opt);
        });
        /* populate gallery grid */
        const grid = document.getElementById('gallery-grid');
        files.forEach(f => {
          const img = document.createElement('img');
          img.src = f.download_url;
          img.alt = f.name.replace(/\.\w+$/, '').replace(/[-_]/g, ' ');
          img.loading = 'lazy';
          grid.appendChild(img);
        });
      });

    /* 2. Webcam + Selfie Segmentation Demo (kept minimal) */
    const webcam = document.getElementById('webcam');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => { webcam.srcObject = stream; });

    /* 3. Download snapshot */
    document.getElementById('snapBtn').addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'backdrop.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });
  </script>
</body>
</html>
